# ft_services

요약: 이것은 시스템 관리 및 네트워킹 프로젝트이다.

## 1. 개요

ft_services는 쿠버네티스를 소개한다. 당신은 쿠버네티스를 통해 클러스터 관리와 개발을 해볼 것이다. 네트워크를 가상화해볼 것이고, 클러스터링을 해볼 것이다.

## 2. 일반 지침

- 서버 구성에 필요한 파일은 srcs 폴더에 넣어야 한다.
- setup.sh 파일은 루트에 있어야 한다. 이 스크립트는 당신의 모든 어플리케이션을 설정(setup)할 것이다.
- 이 주제에는 기존의 방식과 새로운 방식 모두 필요하다. 따라서 이렇게 충고하고 싶다. docker, kubernetes, 그 외 모든 유용한 것들에 대한 많은 글들을 읽는 것을 두려워하지 마라.

## 3. 필수 파트

이 프로젝트는 다른 서비스의 인프라를 설정하는 것으로 이루어져 있다. 이것을 하기위해, 당신은 kubernetes를 사용해야 한다. 다중 서비스 클러스터를 설정해야 한다. 각 서비스는 전용 컨테이너에서 실행되어야 한다. 각 컨테이너는 해당 서비스와 같은 이름을 써야하며, 성능상의 이유로 Alpine linux를 사용해서 빌드해야 한다. 또한 컨테이너들은 setup.sh에서 호출된 dockerfile을 가져야 한다. 당신이 사용할 이미지는 직접 만들어야 한다. 이미 빌드된 이미지를 사용하는 것은 금지다.

또한 다음을 설정해야 한다.

- Kubernetes 웹 대시보드. 이것은 클러스터를 관리하는 것을 도와줄 것이다.
- 서비스들의 외부 권한을 관리하는 **Load Balancer**. 이것은 클러스터의 유일한 엔트리 포인트가 될 것이다. 당신은 서비스와 연결된 포트들을 유지해야 한다. (grafana 등의 경우 IP:3000)
- 포트 80과 443에서 수신 대기하는 **Nginx** 서버. 포트 80은 http로 되어있으며, 301-443 유형의 체계적인 리다이렉션이어야 하며 https로 되어 있다. 표시되는 페이지는 중요하지 않다.
- **FTPS** 서버는 21 포트를 수신한다.
- **WordPress** 웹사이트는 5050 포트를 listen하고, MySQL 데이터베이스와 작동한다. 두 서비스는 각각의 컨테이너에서 실행되어야 한다. Wordpress 웹사이트는 여러 유저들, 그리고 관리자를 가진다.
- **Phpmyadmin**은 5000 포트를 수신하고, MySQL 데이터베이스와 링크된다.
- **grafana** 플랫폼은 3000 포트를 listen하고, influxDB 데이터베이스와 링크된다. grafana는 모든 컨테이너를 모니터링할 것이다. 하나의 서비스마다 하나의 대시보드를 만들어야 한다. influxDB와 grafana는 두개의 분리된 컨테이너로 이루어질 것이다.
- 두 데이터베이스 컨테이너 중 하나가 충돌하거나 정지하는 경우, 데이터가 유지되도록 해야한다.
- SSH에 로그인해서 Nginx 컨테이너에 접근할 수 있어야 한다.
- 충돌 혹은 중지 시 모든 컨테이너를 다시 시작해야 한다.

🚫 노드 포트 서비스, Ingress Controller 객체 또는 kubectl 포트-포워드 명령은 금지된다. 당신의 Load Balancer이 클러스터의 유일한 entry point여야 한다.

💡 클라우드 공급자가 제공한 Load Balancer을 사용하는 것은 소용없다. 오히려 MetalLB를 봐야한다.

💡 보안은 중요하다. 절대로 해서는 안되는 서비스를 노출하지 마라.